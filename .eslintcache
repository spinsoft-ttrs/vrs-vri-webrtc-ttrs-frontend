[{"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\index.js":"1","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\RouterApp.js":"2","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\serviceWorker.js":"3","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\index.js":"4","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\index.js":"5","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\actions\\fetchAPI.js":"6","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\actions\\index.js":"7","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\registerData.js":"8","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\webSocketLogsReducer.js":"9","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\messagedataReducer.js":"10","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\webStatusReducer.js":"11","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\controlVideoReducer.js":"12","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\chooseCameraReducer.js":"13","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Login\\index.js":"14","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\index.js":"15","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ReceivingCall\\index.js":"16","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\index.js":"17","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\EndCall\\index.js":"18","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Register\\index.js":"19","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ChooseConversation\\index.js":"20","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Help\\index.js":"21","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Emergency\\index.js":"22","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\HelpDesk\\index.js":"23","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Login\\Login.js":"24","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ReceivingCall\\ReceivingCall.js":"25","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Register\\Register.js":"26","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ChooseConversation\\ChooseConversation.js":"27","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\VideoCall.js":"28","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\EndCall\\EndCall.js":"29","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Help\\Help.js":"30","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\Dialpad.js":"31","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Emergency\\Emergency.js":"32","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\HelpDesk\\HelpDesk.js":"33","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\PhoneKeyboard.js":"34","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\components\\Statusbar.js":"35","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\Chat.js":"36","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ControlVideo.js":"37","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ControlVideo2.js":"38","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\VideoStopwatch.js":"39","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ChatInVideo.js":"40","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\index.js":"41","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\CheckMobile.js":"42","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\PreviewText.js":"43","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\CodecsHandler.js":"44","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\DetectSize.js":"45","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\PublicService\\index.js":"46","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\PublicService\\PublicService.js":"47"},{"size":1540,"mtime":1611210058349,"results":"48","hashOfConfig":"49"},{"size":6435,"mtime":1613983343036,"results":"50","hashOfConfig":"49"},{"size":5140,"mtime":1590980031692,"results":"51","hashOfConfig":"49"},{"size":690,"mtime":1590980031691,"results":"52","hashOfConfig":"49"},{"size":587,"mtime":1611200376846,"results":"53","hashOfConfig":"49"},{"size":4201,"mtime":1611302665869,"results":"54","hashOfConfig":"49"},{"size":806,"mtime":1590980031459,"results":"55","hashOfConfig":"49"},{"size":242,"mtime":1590980031691,"results":"56","hashOfConfig":"49"},{"size":233,"mtime":1590980031692,"results":"57","hashOfConfig":"49"},{"size":550,"mtime":1592879547852,"results":"58","hashOfConfig":"49"},{"size":266,"mtime":1613983276089,"results":"59","hashOfConfig":"49"},{"size":399,"mtime":1598010245644,"results":"60","hashOfConfig":"49"},{"size":219,"mtime":1590980031690,"results":"61","hashOfConfig":"49"},{"size":34,"mtime":1590980031700,"results":"62","hashOfConfig":"49"},{"size":38,"mtime":1590980031715,"results":"63","hashOfConfig":"49"},{"size":42,"mtime":1590980031701,"results":"64","hashOfConfig":"49"},{"size":36,"mtime":1590980031696,"results":"65","hashOfConfig":"49"},{"size":36,"mtime":1590980031697,"results":"66","hashOfConfig":"49"},{"size":37,"mtime":1590980031703,"results":"67","hashOfConfig":"49"},{"size":47,"mtime":1590980031693,"results":"68","hashOfConfig":"49"},{"size":33,"mtime":1590980061183,"results":"69","hashOfConfig":"49"},{"size":38,"mtime":1594952817220,"results":"70","hashOfConfig":"49"},{"size":37,"mtime":1594952817223,"results":"71","hashOfConfig":"49"},{"size":4144,"mtime":1610938373069,"results":"72","hashOfConfig":"49"},{"size":2328,"mtime":1590980031700,"results":"73","hashOfConfig":"49"},{"size":3651,"mtime":1613620873797,"results":"74","hashOfConfig":"49"},{"size":2338,"mtime":1590980031693,"results":"75","hashOfConfig":"49"},{"size":22413,"mtime":1613709046643,"results":"76","hashOfConfig":"49"},{"size":1875,"mtime":1590980061177,"results":"77","hashOfConfig":"49"},{"size":3229,"mtime":1590980061178,"results":"78","hashOfConfig":"49"},{"size":18200,"mtime":1610959339380,"results":"79","hashOfConfig":"49"},{"size":6019,"mtime":1602053422602,"results":"80","hashOfConfig":"49"},{"size":3805,"mtime":1596185307792,"results":"81","hashOfConfig":"49"},{"size":6537,"mtime":1610956491895,"results":"82","hashOfConfig":"49"},{"size":1451,"mtime":1610961331725,"results":"83","hashOfConfig":"49"},{"size":8334,"mtime":1606896034936,"results":"84","hashOfConfig":"49"},{"size":4450,"mtime":1593682232818,"results":"85","hashOfConfig":"49"},{"size":4847,"mtime":1610961210305,"results":"86","hashOfConfig":"49"},{"size":660,"mtime":1590980031707,"results":"87","hashOfConfig":"49"},{"size":8012,"mtime":1606896009350,"results":"88","hashOfConfig":"49"},{"size":228,"mtime":1611026007909,"results":"89","hashOfConfig":"49"},{"size":412,"mtime":1595216478380,"results":"90","hashOfConfig":"49"},{"size":2326,"mtime":1594975076035,"results":"91","hashOfConfig":"49"},{"size":13464,"mtime":1595216321702,"results":"92","hashOfConfig":"49"},{"size":1122,"mtime":1611026159086,"results":"93","hashOfConfig":"49"},{"size":42,"mtime":1611200017855,"results":"94","hashOfConfig":"49"},{"size":5413,"mtime":1613983394810,"results":"95","hashOfConfig":"49"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},"1ex7ku",{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"153","usedDeprecatedRules":"98"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"166","messages":"167","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"174","messages":"175","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"184","messages":"185","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"186","usedDeprecatedRules":"98"},{"filePath":"187","messages":"188","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"189","usedDeprecatedRules":"98"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\index.js",[],["194","195"],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\RouterApp.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\serviceWorker.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\actions\\fetchAPI.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\actions\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\registerData.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\webSocketLogsReducer.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\messagedataReducer.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\webStatusReducer.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\controlVideoReducer.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\reducers\\chooseCameraReducer.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Login\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ReceivingCall\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\EndCall\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Register\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ChooseConversation\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Help\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Emergency\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\HelpDesk\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Login\\Login.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ReceivingCall\\ReceivingCall.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Register\\Register.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\ChooseConversation\\ChooseConversation.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\VideoCall.js",["196","197"],"import React, {useState, useEffect} from 'react';\r\nimport ControlVideo from './components/ControlVideo';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Chat from './components/Chat';\r\nimport ChatInVideo from './components/ChatInVideo';\r\nimport ControlVideo2 from './components/ControlVideo2';\r\nimport VideoStopwatch from './components/VideoStopwatch';\r\nimport Statusbar from '../../components/Statusbar';\r\nimport { CodecsHandler, PreviewText, DetectSize } from './fuctions';\r\nimport { setMessagedata, setRegisterData, setWebStatus, setControlVideo } from '../../actions';\r\nimport { closeRoom } from '../../actions/fetchAPI';\r\n// eslint-disable-next-line react-hooks/exhaustive-deps\r\nimport adapter from 'webrtc-adapter';\r\nimport \"./style.css\";\r\n\r\nvar interop = require('@jitsi/sdp-interop');\r\n    interop = new interop.Interop();\r\n// .Interop();\r\n\r\nconst { detect } = require('detect-browser');\r\nconst browser    = detect();\r\nconst async      = require('async');\r\nconst dayjs      = require('dayjs');\r\nconst matchMedia = window.matchMedia(\"(max-width: 768px)\");\r\n\r\nvar constraints;\r\n\r\nif(browser.name === \"firefox\"){\r\n    constraints = { \r\n        audio: true, \r\n        video: {\r\n            frameRate : { max : 15 },\r\n            width: { min: 352, max: 1000 },\r\n            height: { min: 240 },\r\n        },\r\n        optional: [ { facingMode: \"user\" }]\r\n    }\r\n}else{\r\n    constraints = { \r\n        audio: true, \r\n        video: {\r\n            frameRate : { min: 15, max : 15},\r\n            width: { min: 352, max: 352 },\r\n            height: { min: 240, max: 240},    \r\n        },\r\n        optional: [ { facingMode: \"user\" }]\r\n    }\r\n}\r\n// constraints = { \r\n//     audio: true, \r\n//     video: true\r\n// }\r\n\r\nvar localVideo, remoteVideo;\r\n\r\nconst VideoCall = () => {\r\n\r\n    const [msgRealtime, setMsgRealtime] = useState(\"\")\r\n    const [screenOrientation, setScreenOrientation] = useState(\"oriented\");\r\n    const [msgRealtimeRaw, setMsgRealtimeRaw] = useState(\"\")\r\n    const [chooseCamera, setChooseCamera] = useState(false);\r\n    const [peerconnection, setPeerconnection] = useState(null);\r\n    const [connection, setConnection] = useState(false);\r\n    const [iOSDevice, setiOSDevice] = useState(\"\");\r\n    const controlVideo = useSelector(state => state.controlVideo);\r\n    const registerData = useSelector(state => state.registerData);\r\n    // const selectDeviceLabel = useSelector(state => state.chooseCamera);\r\n    const dispatch = useDispatch();\r\n\r\n    const size = DetectSize();\r\n\r\n    useEffect(() => {\r\n        if(size.width > size.height){\r\n            setScreenOrientation(\"landscape\");\r\n        }else{\r\n            setScreenOrientation(\"oriented\");\r\n        }\r\n    },[size])\r\n\r\n    useEffect(() => {\r\n        document.body.style.backgroundColor = \"#0F3548\";\r\n        localVideo  = document.getElementById(\"local-video\");\r\n        remoteVideo = document.getElementById(\"remote-video\"); \r\n        dragElement(document.getElementById(\"img_vdocall\"))\r\n        if(browser.os === \"Android OS\"){\r\n            initAndroid();\r\n            async function initAndroid() {\r\n                try {\r\n                    await navigator.mediaDevices.getUserMedia(constraints);\r\n                    makeCall(true);\r\n                } catch (e) {\r\n                }\r\n            }\r\n        }else{\r\n            makeCall(true);\r\n        }\r\n        if(localStorage.getItem(\"callType\")===\"callVRS\"){\r\n            dispatch(setControlVideo(\"openMic\", false));\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        if (matchMedia.matches) {\r\n            if(controlVideo.openMessage){\r\n                document.getElementById(\"slideMessage\").style.display = \"block\";\r\n                document.getElementById(\"img_vdocall\").classList.add('vdo_call_show');\r\n                document.getElementById(\"call-mobile\").classList.add(\"call-mobile\");\r\n                document.getElementById(\"waiting_mobile\").classList.add(\"waiting_mobile\");\r\n            }else{\r\n                // alert(\"HE\")\r\n                document.getElementById(\"slideMessage\").style.display = \"none\";\r\n                document.getElementById(\"img_vdocall\").classList.remove('vdo_call_show');\r\n                document.getElementById(\"call-mobile\").classList.remove(\"call-mobile\");\r\n                // document.getElementById(\"waiting_mobile\").classList.remove(\"waiting_mobile\");\r\n            }\r\n        }else{\r\n            if(controlVideo.openMessage){\r\n                document.getElementById(\"mySidenav\").style.width = \"30%\";\r\n                document.getElementById(\"xxx\").style.display = \"block\";\r\n                document.getElementById(\"main\").style.marginRight = \"30%\";\r\n            }else{\r\n                document.getElementById(\"mySidenav\").style.width = \"0\";\r\n                document.getElementById(\"xxx\").style.display = \"none\";\r\n                document.getElementById(\"main\").style.marginRight = \"0\";\r\n            }\r\n        }\r\n    },[controlVideo.openMessage, connection])\r\n\r\n    useEffect(() => {\r\n        if(controlVideo.show === false){\r\n            if (browser.os === 'iOS'){\r\n                setiOSDevice('iphone-control');\r\n                // document.getElementById(\"img_vdocall\").classList.add('vdo_call_show');\r\n            }else{\r\n                setiOSDevice(\"\");\r\n            }\r\n        }else{\r\n            setiOSDevice(\"\");\r\n        }\r\n        // document.body.scrollTop = 0; // For Safari\r\n        // document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera\r\n    },[controlVideo.show])\r\n    \r\n    useEffect(() => {\r\n        dispatch(setControlVideo(\"openMessage\", true));\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[controlVideo.show])\r\n\r\n    useEffect(()=>{\r\n        if(connection){\r\n            localVideo.srcObject.getTracks().forEach(function(track){\r\n                if(track.kind === \"video\"){ \r\n                    track.enabled = controlVideo.openVideo;  \r\n                }\r\n            }); \r\n        }\r\n    },[controlVideo.openVideo, connection])\r\n\r\n    useEffect(()=>{\r\n        if(connection){\r\n            localVideo.srcObject.getTracks().forEach(function(track){\r\n                if(track.kind === \"audio\"){ \r\n                    track.enabled = controlVideo.openMic;  \r\n                }\r\n            });\r\n        }\r\n    },[controlVideo.openMic, connection])\r\n    \r\n    useEffect(()=>{\r\n        if(connection){\r\n            remoteVideo.srcObject.getTracks().forEach(function(track){\r\n                // console.log(track)\r\n                if(track.kind === \"audio\"){ \r\n                    track.enabled = controlVideo.openAudio;  \r\n                }\r\n            });\r\n        }\r\n    },[controlVideo.openAudio, connection])\r\n\r\n    useEffect(()=>{\r\n        if(controlVideo.openTerminate){\r\n            if(connection){\r\n\r\n                localVideo.srcObject.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n                localVideo.srcObject = null;\r\n                remoteVideo.srcObject.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n                remoteVideo.srcObject = null;\r\n                peerconnection.terminate();\r\n                registerData.userAgent.unregister();\r\n                // dispatch(setRegisterData(\"userAgent\", null));\r\n                dispatch(setControlVideo(\"openTerminate\", false))\r\n                // dispatch(setWebStatus(\"dialpad\"));\r\n                // window.close();\r\n                try {\r\n                    if(localStorage.getItem(\"directlogin\") === \"true\"){\r\n                        dispatch(setWebStatus(\"login\"));\r\n                    }else{\r\n                        window.location.href = \"https://ttrs.or.th\";\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n                \r\n            }else{\r\n                window.close();\r\n                registerData.userAgent.unregister();\r\n                try {\r\n                    if(localStorage.getItem(\"directlogin\") === \"true\"){\r\n                        dispatch(setWebStatus(\"login\"));\r\n                    }else{\r\n                        window.location.href = \"https://ttrs.or.th\";\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error)\r\n                }\r\n                // dispatch(setWebStatus(\"dialpad\"));\r\n                dispatch(setControlVideo(\"openTerminate\", false))\r\n            }\r\n            closeRoom(localStorage.getItem('uuid'));\r\n        }\r\n         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[controlVideo.openTerminate])\r\n\r\n    const makeCall = () => {\r\n        console.log(\"makecall\")\r\n        var options = {};\r\n        async.series([\r\n            (callback) => {\r\n                var eventHandlers = {\r\n                    'progress':  (e) => {\r\n                        console.log('call is in progress') },\r\n                    'failed':    (e) => {\r\n                        if(e.cause === \"User Denied Media Access\"){\r\n                            alert(\"ไม่สามารถเข้าถึงสิทธิ์การใช้งานกล้องวิดีโอ\")\r\n                        }\r\n                    },\r\n                    'ended':     (e) => {\r\n                        console.log(\"ended\", e)\r\n                        registerData.userAgent.unregister();\r\n                    },\r\n                    'confirmed': (e) => {},\r\n                    'icecandidate' : (e) => {},\r\n                    'reinvite' : (e) =>{},\r\n                    'sdp' : (e) => {\r\n                        if(e.originator === \"local\"){\r\n\r\n                            // const videobitrate = 20000;\r\n                            // Set bandwidth for video\r\n                            // e.sdp = e.sdp.replace(/(m=video.*\\r\\n)/g, `$1b=AS:${videobitrate}\\r\\n`);\r\n                            e.sdp = interop.toPlanB(e.sdp)\r\n                            console.log(e.sdp)\r\n                            // e.sdp = CodecsHandler.preferCodec(e.sdp, \"h264\");\r\n                        }\r\n                    }\r\n                };\r\n\r\n                var pcConfig = {};\r\n\r\n                // pcConfig = {\r\n                //     \"iceServers\" : [{ url:\"turn:turn.ttrs.in.th?transport=udp\", username: \"turn01\", credential:\"Test1234\"}],\r\n                //     \"iceTransportPolicy\":\"relay\",\r\n                //     'rtcpMuxPolicy' : \"negotiate\",\r\n                // }\r\n                pcConfig = {\r\n                    \"iceServers\" : [{ url:\"turn:turn.ttrs.in.th?transport=tcp\", username: \"turn01\", credential:\"Test1234\"}],\r\n                    \"bundlePolicy\" : \"max-compat\",\r\n                    \"iceTransportPolicy\":\"all\",\r\n                    'rtcpMuxPolicy' : \"negotiate\",\r\n                }\r\n\r\n                options = {\r\n                    'eventHandlers'        : eventHandlers,\r\n                    'mediaConstraints'     : constraints,\r\n                    'pcConfig'             : pcConfig,\r\n                    'sessionTimersExpires' : 3600\r\n                };\r\n        \r\n                registerData.userAgent.on('newRTCSession', (data) => {\r\n                    var session = data.session;\r\n\r\n                    session.on('ended'    , (e) => {\r\n                        dispatch(setWebStatus(\"terminate\"))\r\n                        registerData.userAgent.unregister();\r\n                    });\r\n                    session.on('failed'   , (e) => {\r\n                        console.log(\"failed\", e)\r\n                        registerData.userAgent.unregister();\r\n                        dispatch(setWebStatus(\"terminate\"))\r\n                    });\r\n                    session.on(\"confirmed\", (e) => {\r\n                        localVideo.srcObject = session.connection.getLocalStreams()[0];\r\n                        remoteVideo.srcObject = session.connection.getRemoteStreams()[0];\r\n                        setPeerconnection(session);\r\n                        setConnection(true);\r\n                    });\r\n                });\r\n                registerData.userAgent.on('newMessage', function(e){ \r\n                    try {\r\n                        if(e.message._request.body.startsWith(\"@MCU\")){\r\n                            setTimeout(() => {\r\n                                localVideo.srcObject.getTracks().forEach(function(track){ if(track.kind === \"video\"){ track.enabled = false; }}); \r\n                            }, 4000)          \r\n                            setTimeout(() => {\r\n                                localVideo.srcObject.getTracks().forEach(function(track){ if(track.kind === \"video\"){ track.enabled = true; }}); \r\n                            }, 5000)\r\n                            e.message._request.body = \"\";\r\n                        }\r\n                        if(e.message._request.body.startsWith(\"@switch\")){ \r\n\r\n                            localVideo.srcObject.getTracks().forEach(function(track){\r\n                                if(track.kind === \"video\"){ track.enabled = false; }\r\n                            }); \r\n                            setTimeout(() => {\r\n                                localVideo.srcObject.getTracks().forEach(function(track){\r\n                                    console.log(\"turn on camera\")\r\n                                    if(track.kind === \"video\"){ track.enabled = true; }\r\n                                }); \r\n                                setConnection(true)\r\n                            }, 4000)\r\n\r\n                            dispatch(setRegisterData(\"callNumber\", e.message._request.body.split(\"|\")[1]));\r\n                            if(localStorage.getItem(\"callType\") === \"callEmergency\"){\r\n                                setTimeout(()=>{\r\n                                    if(localStorage.getItem(\"fullname\")!==\"\"){\r\n                                        registerData.userAgent.sendMessage(`sip:${e.message._request.body.split(\"|\")[1]}@${registerData.domain}`, `ชื่อ ${localStorage.getItem(\"fullname\")}`);\r\n                                    }\r\n                                    if(localStorage.getItem(\"phone\")!==\"\"){\r\n                                        registerData.userAgent.sendMessage(`sip:${e.message._request.body.split(\"|\")[1]}@${registerData.domain}`, `เบอร์โทรศัพท์ ${localStorage.getItem(\"phone\")}`);\r\n                                    }\r\n                                    switch (localStorage.getItem(\"callType\")) {\r\n                                        case \"callEmergency\":\r\n                                            registerData.userAgent.sendMessage(`sip:${e.message._request.body.split(\"|\")[1]}@${registerData.domain}`, `ประเภทฉุกเฉิน ${localStorage.getItem(\"typeEmergency\")}`);\r\n                                            break;\r\n                                        default:\r\n                                            break;\r\n                                    }\r\n                                },2000);\r\n                            }\r\n                        }else{\r\n            \r\n                            if(e.message._request.body === \"@open_chat\"){\r\n        \r\n                            }else if(!e.message._request.body.startsWith(\"<rtt\")){\r\n                                dispatch(setMessagedata(e.originator, e.originator, dayjs().format('HH:mm:ss'), e.message._request.body));\r\n                                setMsgRealtime(\"\");\r\n                            }else{\r\n                                if(e.originator !== \"local\"){\r\n                                    setMsgRealtimeRaw(e.message._request.body);\r\n                                }\r\n                            }\r\n                        }\r\n                    } catch (error) {}\r\n                });\r\n                callback();\r\n            },\r\n            () => {\r\n                registerData.userAgent.call(`sip:${registerData.callNumber}@${registerData.domain}`, options)\r\n            }\r\n        ])\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(chooseCamera){\r\n            var promise1 = new Promise((resolve, reject) => {\r\n                const tracks = localVideo.srcObject.getTracks();\r\n                tracks.forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n                localVideo.srcObject = null;\r\n                resolve()\r\n            })\r\n            promise1.then(()=>{\r\n                if(constraints.video.facingMode === \"user\"){\r\n                    constraints.video.facingMode = \"environment\";\r\n                }else{\r\n                    constraints.video.facingMode = \"user\";\r\n                }\r\n                constraints.video.facingMode = chooseCamera;\r\n                navigator.mediaDevices.getUserMedia(constraints)\r\n                .then((stream)=>{\r\n                    localVideo.srcObject = stream;\r\n                    peerconnection.connection.getSenders()[1].replaceTrack(stream.getVideoTracks()[0])\r\n                    peerconnection.connection.getSenders()[0].replaceTrack(stream.getAudioTracks()[0])\r\n                })\r\n                .catch(e => console.error(e));\r\n            });\r\n        }\r\n    },[chooseCamera, peerconnection])\r\n\r\n    const handleChooseCamera = () =>{\r\n        if(chooseCamera === \"environment\"){ setChooseCamera(\"user\"); }else{ setChooseCamera(\"environment\") }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(msgRealtimeRaw !== \"\"){\r\n            setMsgRealtime(PreviewText(msgRealtime, msgRealtimeRaw));\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[msgRealtimeRaw])\r\n\r\n    const handleIOSClass = () => {\r\n        if(browser.os === 'Android OS'){\r\n            return `vdo_call_show_android`;\r\n        }\r\n        if(browser.os === 'iOS'){\r\n            if(iOSDevice === \"iphone-control\"){\r\n                if(controlVideo.show){\r\n                    return \"vdo_call_show_ios\"\r\n                }else{\r\n                    return `${iOSDevice} vdo_call_show_ios`;\r\n                }\r\n            }else{\r\n                return \"vdo_call_show_ios\";\r\n            }\r\n        }\r\n        return \"vdo_call_show_pc\";\r\n    }\r\n    const handleRemoteVideoClass = () => {\r\n        if(browser.os === 'iOS'){\r\n            return \"remote-video-mobile-with-keyboard-ios\"\r\n        }else if(browser.os === 'Android OS'){\r\n            if(controlVideo.show === false){\r\n                return \"remote-video-mobile-with-keyboard-android\"\r\n            }else{\r\n                return \"remote-video-mobile\"\r\n            }\r\n        }else {\r\n            return `remote-video`;\r\n        }       \r\n    }\r\n    const dragElement = (elmnt) => {\r\n        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\r\n        if (document.getElementById(elmnt.id + \"header\")) {\r\n          // if present, the header is where you move the DIV from:\r\n          document.getElementById(elmnt.id + \"header\").onmousedown = dragMouseDown;\r\n        } else {\r\n          // otherwise, move the DIV from anywhere inside the DIV:\r\n          elmnt.onmousedown = dragMouseDown;\r\n        }\r\n      \r\n        function dragMouseDown(e) {\r\n          e = e || window.event;\r\n          e.preventDefault();\r\n          // get the mouse cursor position at startup:\r\n          pos3 = e.clientX;\r\n          pos4 = e.clientY;\r\n          document.onmouseup = closeDragElement;\r\n          // call a function whenever the cursor moves:\r\n          document.onmousemove = elementDrag;\r\n        }\r\n      \r\n        function elementDrag(e) {\r\n          e = e || window.event;\r\n          e.preventDefault();\r\n          // calculate the new cursor position:\r\n          pos1 = pos3 - e.clientX;\r\n          pos2 = pos4 - e.clientY;\r\n          pos3 = e.clientX;\r\n          pos4 = e.clientY;\r\n          // set the element's new position:\r\n          elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\r\n          elmnt.style.left = (elmnt.offsetLeft - pos1) + \"px\";\r\n        }\r\n      \r\n        function closeDragElement() {\r\n          // stop moving when mouse button is released:\r\n          document.onmouseup = null;\r\n          document.onmousemove = null;\r\n        }\r\n    }\r\n    const detectDeviceAndScreen = () => {\r\n        if(browser.os === 'Android OS' || browser.os === 'iOS'){\r\n            if(screenOrientation === \"landscape\"){\r\n                return \"incoming-calls-mobile\";\r\n            }else {\r\n                return \"\";\r\n            }\r\n        }else{\r\n            return \"\";\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"vdocall-keypad\">\r\n                {!matchMedia.matches? <Chat messageRealtime={msgRealtime} /> : <div/>}\r\n                <div className=\"vdo-calling\" id=\"main\">\r\n                    <Statusbar  handleChooseCamera = {handleChooseCamera} stopWatch = {<VideoStopwatch start={connection} />} />\r\n                    <div className={`incoming-sec ${detectDeviceAndScreen()}`}>\r\n                        <div className=\"incoming-calls calls-waiting\" id=\"call-mobile\">\r\n                            <div className={`${handleIOSClass()} img-vdo d-block mb-3  `} id=\"img_vdocall\" >\r\n\r\n                                <div id=\"img_videocallheader\">\r\n                                {matchMedia.matches? <div> <ChatInVideo messageRealtime={msgRealtime} iOSDevice={iOSDevice}/> <ControlVideo2/> </div> : <div/> }\r\n                                <video id=\"local-video\" className=\"local-video\" alt=\"local-video\" muted autoPlay playsInline />\r\n                                </div>\r\n                            </div>\r\n                            <div \r\n                                id=\"waiting_mobile\"\r\n                            >\r\n                                <div className={`${iOSDevice} img-vdo`}>\r\n                                    <video id=\"remote-video\" poster={require(\"./img/waiting.png\").default} \r\n                                        className={`${handleRemoteVideoClass()}`} \r\n                                        // className=\"remote-video-mobile-with-keyboard-ios\"\r\n                                        autoPlay playsInline/>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {!matchMedia.matches? <ControlVideo/> : <div/>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default VideoCall;","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\EndCall\\EndCall.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Help\\Help.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\Dialpad.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Emergency\\Emergency.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\HelpDesk\\HelpDesk.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\Dialpad\\PhoneKeyboard.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\components\\Statusbar.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\Chat.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ControlVideo.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ControlVideo2.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\VideoStopwatch.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\components\\ChatInVideo.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\CheckMobile.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\PreviewText.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\CodecsHandler.js",["198","199","200","201"],"const CodecsHandler = (function() {\r\n        function preferCodec(sdp, codecName) {\r\n            var info = splitLines(sdp);\r\n\r\n            if (!info.videoCodecNumbers) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'vp8' && info.vp8LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'vp9' && info.vp9LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            if (codecName === 'h264' && info.h264LineNumber === info.videoCodecNumbers[0]) {\r\n                return sdp;\r\n            }\r\n\r\n            sdp = preferCodecHelper(sdp, codecName, info);\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function preferCodecHelper(sdp, codec, info, ignore) {\r\n            var preferCodecNumber = '';\r\n\r\n            if (codec === 'vp8') {\r\n                if (!info.vp8LineNumber) {\r\n                    return sdp;\r\n                }\r\n                preferCodecNumber = info.vp8LineNumber;\r\n            }\r\n\r\n            if (codec === 'vp9') {\r\n                if (!info.vp9LineNumber) {\r\n                    return sdp;\r\n                }\r\n                preferCodecNumber = info.vp9LineNumber;\r\n            }\r\n\r\n            if (codec === 'h264') {\r\n                if (!info.h264LineNumber) {\r\n                    return sdp;\r\n                }\r\n\r\n                preferCodecNumber = info.h264LineNumber;\r\n            }\r\n\r\n            var newLine = info.videoCodecNumbersOriginal.split('SAVPF')[0] + 'SAVPF ';\r\n\r\n            var newOrder = [preferCodecNumber];\r\n\r\n            if (ignore) {\r\n                newOrder = [];\r\n            }\r\n\r\n            info.videoCodecNumbers.forEach(function(codecNumber) {\r\n                if (codecNumber === preferCodecNumber) return;\r\n                newOrder.push(codecNumber);\r\n            });\r\n\r\n            newLine += newOrder.join(' ');\r\n\r\n            sdp = sdp.replace(info.videoCodecNumbersOriginal, newLine);\r\n            return sdp;\r\n        }\r\n\r\n        function splitLines(sdp) {\r\n            var info = {};\r\n            sdp.split('\\n').forEach(function(line) {\r\n                if (line.indexOf('m=video') === 0) {\r\n                    info.videoCodecNumbers = [];\r\n                    line.split('SAVPF')[1].split(' ').forEach(function(codecNumber) {\r\n                        codecNumber = codecNumber.trim();\r\n                        if (!codecNumber || !codecNumber.length) return;\r\n                        info.videoCodecNumbers.push(codecNumber);\r\n                        info.videoCodecNumbersOriginal = line;\r\n                    });\r\n                }\r\n\r\n                if (line.indexOf('VP8/90000') !== -1 && !info.vp8LineNumber) {\r\n                    info.vp8LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n\r\n                if (line.indexOf('VP9/90000') !== -1 && !info.vp9LineNumber) {\r\n                    info.vp9LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n\r\n                if (line.indexOf('H264/90000') !== -1 && !info.h264LineNumber) {\r\n                    info.h264LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\r\n                }\r\n            });\r\n\r\n            return info;\r\n        }\r\n\r\n        function removeVPX(sdp) {\r\n            var info = splitLines(sdp);\r\n\r\n            // last parameter below means: ignore these codecs\r\n            sdp = preferCodecHelper(sdp, 'vp9', info, true);\r\n            sdp = preferCodecHelper(sdp, 'vp8', info, true);\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function disableNACK(sdp) {\r\n            if (!sdp || typeof sdp !== 'string') {\r\n                throw 'Invalid arguments.';\r\n            }\r\n\r\n            sdp = sdp.replace('a=rtcp-fb:126 nack\\r\\n', '');\r\n            sdp = sdp.replace('a=rtcp-fb:126 nack pli\\r\\n', 'a=rtcp-fb:126 pli\\r\\n');\r\n            sdp = sdp.replace('a=rtcp-fb:97 nack\\r\\n', '');\r\n            sdp = sdp.replace('a=rtcp-fb:97 nack pli\\r\\n', 'a=rtcp-fb:97 pli\\r\\n');\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function prioritize(codecMimeType, peer) {\r\n            if (!peer || !peer.getSenders || !peer.getSenders().length) {\r\n                return;\r\n            }\r\n\r\n            if (!codecMimeType || typeof codecMimeType !== 'string') {\r\n                throw 'Invalid arguments.';\r\n            }\r\n\r\n            peer.getSenders().forEach(function(sender) {\r\n                var params = sender.getParameters();\r\n                for (var i = 0; i < params.codecs.length; i++) {\r\n                    if (params.codecs[i].mimeType == codecMimeType) {\r\n                        params.codecs.unshift(params.codecs.splice(i, 1));\r\n                        break;\r\n                    }\r\n                }\r\n                sender.setParameters(params);\r\n            });\r\n        }\r\n\r\n        function removeNonG722(sdp) {\r\n            return sdp.replace(/m=audio ([0-9]+) RTP\\/SAVPF ([0-9 ]*)/g, 'm=audio $1 RTP\\/SAVPF 9');\r\n        }\r\n\r\n        function setBAS(sdp, bandwidth, isScreen) {\r\n            if (!bandwidth) {\r\n                return sdp;\r\n            }\r\n\r\n            // if (typeof isFirefox !== 'undefined' && isFirefox) {\r\n            //     return sdp;\r\n            // }\r\n\r\n            if (isScreen) {\r\n                if (!bandwidth.screen) {\r\n                    console.warn('It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.');\r\n                } else if (bandwidth.screen < 300) {\r\n                    console.warn('It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail.');\r\n                }\r\n            }\r\n\r\n            // if screen; must use at least 300kbs\r\n            if (bandwidth.screen && isScreen) {\r\n                sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.screen + '\\r\\n');\r\n            }\r\n\r\n            // remove existing bandwidth lines\r\n            if (bandwidth.audio || bandwidth.video) {\r\n                sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\r\n            }\r\n\r\n            if (bandwidth.audio) {\r\n                sdp = sdp.replace(/a=mid:audio\\r\\n/g, 'a=mid:audio\\r\\nb=AS:' + bandwidth.audio + '\\r\\n');\r\n            }\r\n\r\n            if (bandwidth.screen) {\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.screen + '\\r\\n');\r\n            } else if (bandwidth.video) {\r\n                sdp = sdp.replace(/a=mid:video\\r\\n/g, 'a=mid:video\\r\\nb=AS:' + bandwidth.video + '\\r\\n');\r\n            }\r\n\r\n            return sdp;\r\n        }\r\n\r\n        // Find the line in sdpLines that starts with |prefix|, and, if specified,\r\n        // contains |substr| (case-insensitive search).\r\n        function findLine(sdpLines, prefix, substr) {\r\n            return findLineInRange(sdpLines, 0, -1, prefix, substr);\r\n        }\r\n\r\n        // Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|\r\n        // and, if specified, contains |substr| (case-insensitive search).\r\n        function findLineInRange(sdpLines, startLine, endLine, prefix, substr) {\r\n            var realEndLine = endLine !== -1 ? endLine : sdpLines.length;\r\n            for (var i = startLine; i < realEndLine; ++i) {\r\n                if (sdpLines[i].indexOf(prefix) === 0) {\r\n                    if (!substr ||\r\n                        sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // Gets the codec payload type from an a=rtpmap:X line.\r\n        function getCodecPayloadType(sdpLine) {\r\n            var pattern = new RegExp('a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+');\r\n            var result = sdpLine.match(pattern);\r\n            return (result && result.length === 2) ? result[1] : null;\r\n        }\r\n\r\n        function setVideoBitrates(sdp, params) {\r\n            params = params || {};\r\n            var xgoogle_min_bitrate = params.min;\r\n            var xgoogle_max_bitrate = params.max;\r\n\r\n            var sdpLines = sdp.split('\\r\\n');\r\n\r\n            // VP8\r\n            var vp8Index = findLine(sdpLines, 'a=rtpmap', 'VP8/90000');\r\n            var vp8Payload;\r\n            if (vp8Index) {\r\n                vp8Payload = getCodecPayloadType(sdpLines[vp8Index]);\r\n            }\r\n\r\n            if (!vp8Payload) {\r\n                return sdp;\r\n            }\r\n\r\n            var rtxIndex = findLine(sdpLines, 'a=rtpmap', 'rtx/90000');\r\n            var rtxPayload;\r\n            if (rtxIndex) {\r\n                rtxPayload = getCodecPayloadType(sdpLines[rtxIndex]);\r\n            }\r\n\r\n            if (!rtxIndex) {\r\n                return sdp;\r\n            }\r\n\r\n            var rtxFmtpLineIndex = findLine(sdpLines, 'a=fmtp:' + rtxPayload.toString());\r\n            if (rtxFmtpLineIndex !== null) {\r\n                var appendrtxNext = '\\r\\n';\r\n                appendrtxNext += 'a=fmtp:' + vp8Payload + ' x-google-min-bitrate=' + (xgoogle_min_bitrate || '228') + '; x-google-max-bitrate=' + (xgoogle_max_bitrate || '228');\r\n                sdpLines[rtxFmtpLineIndex] = sdpLines[rtxFmtpLineIndex].concat(appendrtxNext);\r\n                sdp = sdpLines.join('\\r\\n');\r\n            }\r\n\r\n            return sdp;\r\n        }\r\n\r\n        function setOpusAttributes(sdp, params) {\r\n            params = params || {};\r\n\r\n            var sdpLines = sdp.split('\\r\\n');\r\n\r\n            // Opus\r\n            var opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000');\r\n            var opusPayload;\r\n            if (opusIndex) {\r\n                opusPayload = getCodecPayloadType(sdpLines[opusIndex]);\r\n            }\r\n\r\n            if (!opusPayload) {\r\n                return sdp;\r\n            }\r\n\r\n            var opusFmtpLineIndex = findLine(sdpLines, 'a=fmtp:' + opusPayload.toString());\r\n            if (opusFmtpLineIndex === null) {\r\n                return sdp;\r\n            }\r\n\r\n            var appendOpusNext = '';\r\n            appendOpusNext += '; stereo=' + (typeof params.stereo != 'undefined' ? params.stereo : '1');\r\n            appendOpusNext += '; sprop-stereo=' + (typeof params['sprop-stereo'] != 'undefined' ? params['sprop-stereo'] : '1');\r\n\r\n            if (typeof params.maxaveragebitrate != 'undefined') {\r\n                appendOpusNext += '; maxaveragebitrate=' + (params.maxaveragebitrate || 128 * 1024 * 8);\r\n            }\r\n\r\n            if (typeof params.maxplaybackrate != 'undefined') {\r\n                appendOpusNext += '; maxplaybackrate=' + (params.maxplaybackrate || 128 * 1024 * 8);\r\n            }\r\n\r\n            if (typeof params.cbr != 'undefined') {\r\n                appendOpusNext += '; cbr=' + (typeof params.cbr != 'undefined' ? params.cbr : '1');\r\n            }\r\n\r\n            if (typeof params.useinbandfec != 'undefined') {\r\n                appendOpusNext += '; useinbandfec=' + params.useinbandfec;\r\n            }\r\n\r\n            if (typeof params.usedtx != 'undefined') {\r\n                appendOpusNext += '; usedtx=' + params.usedtx;\r\n            }\r\n\r\n            if (typeof params.maxptime != 'undefined') {\r\n                appendOpusNext += '\\r\\na=maxptime:' + params.maxptime;\r\n            }\r\n\r\n            sdpLines[opusFmtpLineIndex] = sdpLines[opusFmtpLineIndex].concat(appendOpusNext);\r\n\r\n            sdp = sdpLines.join('\\r\\n');\r\n            return sdp;\r\n        }\r\n\r\n        // forceStereoAudio => via webrtcexample.com\r\n        // requires getUserMedia => echoCancellation:false\r\n        function forceStereoAudio(sdp) {\r\n            // var sdpLines = sdp.split('\\r\\n');\r\n            // var fmtpLineIndex = null;\r\n            // for (var i = 0; i < sdpLines.length; i++) {\r\n            //     if (sdpLines[i].search('opus/48000') !== -1) {\r\n            //         var opusPayload = extractSdp(sdpLines[i], /:(\\d+) opus\\/48000/i);\r\n            //         break;\r\n            //     }\r\n            // }\r\n            // for (var i = 0; i < sdpLines.length; i++) {\r\n            //     if (sdpLines[i].search('a=fmtp') !== -1) {\r\n            //         var payload = extractSdp(sdpLines[i], /a=fmtp:(\\d+)/);\r\n            //         if (payload === opusPayload) {\r\n            //             fmtpLineIndex = i;\r\n            //             break;\r\n            //         }\r\n            //     }\r\n            // }\r\n            // if (fmtpLineIndex === null) return sdp;\r\n            // sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1');\r\n            // sdp = sdpLines.join('\\r\\n');\r\n            return sdp;\r\n        }\r\n\r\n        return {\r\n            removeVPX: removeVPX,\r\n            disableNACK: disableNACK,\r\n            prioritize: prioritize,\r\n            removeNonG722: removeNonG722,\r\n            setApplicationSpecificBandwidth: function(sdp, bandwidth, isScreen) {\r\n                return setBAS(sdp, bandwidth, isScreen);\r\n            },\r\n            setVideoBitrates: function(sdp, params) {\r\n                return setVideoBitrates(sdp, params);\r\n            },\r\n            setOpusAttributes: function(sdp, params) {\r\n                return setOpusAttributes(sdp, params);\r\n            },\r\n            preferVP9: function(sdp) {\r\n                return preferCodec(sdp, 'vp9');\r\n            },\r\n            preferCodec: preferCodec,\r\n            forceStereoAudio: forceStereoAudio\r\n        };\r\n    })();\r\n\r\nexport default CodecsHandler;","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\VideoCall\\fuctions\\DetectSize.js",["202"],"import {useState, useEffect} from 'react';\r\nimport { DetectSize } from \".\";\r\n\r\nconst useWindowSize = () => {\r\n    // Initialize state with undefined width/height so server and client renders match\r\n    // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n    const [windowSize, setWindowSize] = useState({\r\n      width: undefined,\r\n      height: undefined,\r\n    });\r\n  \r\n    useEffect(() => {\r\n      // Handler to call on window resize\r\n      function handleResize() {\r\n        // Set window width/height to state\r\n        setWindowSize({\r\n          width: window.innerWidth,\r\n          height: window.innerHeight,\r\n        });\r\n      }\r\n      \r\n      // Add event listener\r\n      window.addEventListener(\"resize\", handleResize);\r\n      \r\n      // Call handler right away so state gets updated with initial window size\r\n      handleResize();\r\n      \r\n      // Remove event listener on cleanup\r\n      return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []); // Empty array ensures that effect is only run on mount\r\n  \r\n    return windowSize;\r\n}\r\n\r\nexport default useWindowSize;","C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\PublicService\\index.js",[],"C:\\Users\\DWETON\\Documents\\ttrs-vrs\\webrtc_frontend_new\\src\\views\\PublicService\\PublicService.js",[],{"ruleId":"203","replacedBy":"204"},{"ruleId":"205","replacedBy":"206"},{"ruleId":"207","severity":1,"message":"208","line":9,"column":10,"nodeType":"209","messageId":"210","endLine":9,"endColumn":23},{"ruleId":"207","severity":1,"message":"211","line":13,"column":8,"nodeType":"209","messageId":"210","endLine":13,"endColumn":15},{"ruleId":"212","severity":1,"message":"213","line":111,"column":17,"nodeType":"214","messageId":"215","endLine":111,"endColumn":44},{"ruleId":"212","severity":1,"message":"213","line":128,"column":17,"nodeType":"214","messageId":"215","endLine":128,"endColumn":44},{"ruleId":"216","severity":1,"message":"217","line":134,"column":51,"nodeType":"218","messageId":"219","endLine":134,"endColumn":53},{"ruleId":"220","severity":1,"message":"221","line":144,"column":89,"nodeType":"222","messageId":"223","endLine":144,"endColumn":90,"suggestions":"224"},{"ruleId":"207","severity":1,"message":"225","line":2,"column":10,"nodeType":"209","messageId":"210","endLine":2,"endColumn":20},"no-native-reassign",["226"],"no-negated-in-lhs",["227"],"no-unused-vars","'CodecsHandler' is defined but never used.","Identifier","unusedVar","'adapter' is defined but never used.","no-throw-literal","Expected an error object to be thrown.","ThrowStatement","object","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-useless-escape","Unnecessary escape character: \\/.","Literal","unnecessaryEscape",["228","229"],"'DetectSize' is defined but never used.","no-global-assign","no-unsafe-negation",{"messageId":"230","fix":"231","desc":"232"},{"messageId":"233","fix":"234","desc":"235"},"removeEscape",{"range":"236","text":"237"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"238","text":"239"},"Replace the `\\` with `\\\\` to include the actual backslash character.",[4974,4975],"",[4974,4974],"\\"]